"use strict";(self.webpackChunkreact_native_gesture_handler_docs=self.webpackChunkreact_native_gesture_handler_docs||[]).push([[217],{2097:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>w,contentTitle:()=>j,default:()=>_,frontMatter:()=>x,metadata:()=>a,toc:()=>E});const a=JSON.parse('{"id":"fundamentals/callbacks-events","title":"Gesture callbacks & events","description":"At any given time, each handler instance has an assigned state that can change when new touch events occur or can be forced to change by the touch system in certain circumstances. You can hook into state transitions using specific gesture callbacks.","source":"@site/docs/fundamentals/callbacks-events.mdx","sourceDirName":"fundamentals","slug":"/fundamentals/callbacks-events","permalink":"/react-native-gesture-handler/docs/fundamentals/callbacks-events","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-gesture-handler/edit/main/docs/docs/fundamentals/callbacks-events.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"callbacks-events","title":"Gesture callbacks & events","sidebar_label":"Gesture callbacks & events","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"State manager","permalink":"/react-native-gesture-handler/docs/fundamentals/state-manager"},"next":{"title":"Guides","permalink":"/react-native-gesture-handler/docs/category/guides"}}');var o=t(4848),s=t(8453),r=t(6540),l=t(855),c=t(8532);const i={SWM_OFF_WHITE:"#f8f9ff",SWM_PURPLE_LIGHT_100:"#782aeb",SWM_NAVY_DARK_140:"#1b2445",SWM_NAVY_DARK_100:"#001a72"},d=996;function h({nodes:e,edges:n}){const t=(0,r.useRef)(null),[a,s]=(0,r.useState)(!1),{colorMode:h}=(0,c.G)(),u="dark"===h;return(0,r.useEffect)((()=>{s(window.innerWidth<=d);const e=()=>{s(window.innerWidth<=d)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>{const o={nodes:{shape:"box",margin:{top:15,bottom:15,left:15,right:15},font:{face:"Aeonik",size:a?14:18,color:u?i.SWM_OFF_WHITE:i.SWM_PURPLE_LIGHT_100},color:{background:u?i.SWM_NAVY_DARK_140:i.SWM_OFF_WHITE,border:i.SWM_PURPLE_LIGHT_100,hover:{background:u?i.SWM_PURPLE_LIGHT_100:i.SWM_OFF_WHITE,border:i.SWM_PURPLE_LIGHT_100},highlight:{background:u?i.SWM_PURPLE_LIGHT_100:i.SWM_OFF_WHITE,border:i.SWM_PURPLE_LIGHT_100}}},edges:{smooth:{enabled:!0,type:"continuous",forceDirection:a?"vertical":"horizontal",roundness:.1},color:{color:u?i.SWM_OFF_WHITE:i.SWM_NAVY_DARK_100,hover:i.SWM_PURPLE_LIGHT_100,highlight:i.SWM_PURPLE_LIGHT_100},selfReference:{size:25,angle:a?0:Math.PI/2},arrows:{to:{scaleFactor:.8}},arrowStrikethrough:!1},layout:{hierarchical:{direction:a?"UD":"LR",sortMethod:"directed",levelSeparation:a?150:300,nodeSpacing:a?300:100}},physics:!1,interaction:{dragNodes:!1,dragView:!1,zoomView:!1,hover:!0}},s=new l.lg(t.current,{nodes:e,edges:n},o);return s.once("afterDrawing",(()=>{s.fit()})),()=>s.destroy()}),[u,n,e,a]),(0,o.jsx)("div",{ref:t,style:{height:a?"500px":"300px",border:"1px solid var(--swm-border)",background:"var(--swm-off-background)",marginBottom:"var(--ifm-leading)"}})}const u=new l.PG([{id:1,label:"onBegin",level:0},{id:2,label:"onActivate",level:1},{id:3,label:"onUpdate",level:2},{id:4,label:"onDeactivate",level:3},{id:5,label:"onFinalize",level:3}]),v=new l.PG([{from:1,to:2,arrows:"to"},{from:1,to:5,arrows:"to"},{from:2,to:3,arrows:"to"},{from:2,to:4,arrows:"to"},{from:2,to:5,arrows:"to"},{from:3,to:3,arrows:"to"},{from:3,to:4,arrows:"to"},{from:3,to:5,arrows:"to"},{from:4,to:5,arrows:"to"}]);function p(){return(0,o.jsx)(h,{nodes:u,edges:v})}const g=new l.PG([{id:1,label:"onTouchesDown",level:0},{id:2,label:"onTouchesMove",level:1},{id:3,label:"onTouchesUp",level:2},{id:4,label:"onTouchesCancel",level:2}]),b=new l.PG([{from:1,to:2,arrows:"to"},{from:1,to:3,arrows:"to"},{from:2,to:2,arrows:"to"},{from:2,to:3,arrows:"to"},{from:1,to:4,arrows:"to"},{from:2,to:4,arrows:"to"}]);function m(){return(0,o.jsx)(h,{nodes:g,edges:b})}var f=t(2800);const x={id:"callbacks-events",title:"Gesture callbacks & events",sidebar_label:"Gesture callbacks & events",sidebar_position:7},j=void 0,w={},E=[{value:"Callbacks flow",id:"callbacks-flow",level:2},{value:"GestureEvent callbacks",id:"gestureevent-callbacks",level:3},{value:"TouchEvent callbacks",id:"touchevent-callbacks",level:3},{value:"Callbacks",id:"callbacks",level:2},{value:"onBegin",id:"onbegin",level:3},{value:"onActivate",id:"onactivate",level:3},{value:"onUpdate",id:"onupdate",level:3},{value:"onDeactivate",id:"ondeactivate",level:3},{value:"onFinalize",id:"onfinalize",level:3},{value:"onTouchesDown",id:"ontouchesdown",level:3},{value:"onTouchesMove",id:"ontouchesmove",level:3},{value:"onTouchesUp",id:"ontouchesup",level:3},{value:"onTouchesCancel",id:"ontouchescancel",level:3},{value:"Events",id:"events",level:2},{value:"GestureEvent",id:"gestureevent",level:3},{value:"TouchEvent",id:"touchevent",level:3}];function T(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["At any given time, each handler instance has an assigned ",(0,o.jsx)(n.a,{href:"/docs/under-the-hood/state",children:"state"})," that can change when new touch events occur or can be forced to change by the touch system in certain circumstances. You can hook into state transitions using specific ",(0,o.jsx)(n.a,{href:"#callbacks",children:"gesture callbacks"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["When ",(0,o.jsx)(n.code,{children:"Reanimated"})," is installed, all callbacks are automatically workletized. For more details, refer to the ",(0,o.jsx)(n.a,{href:"/docs/fundamentals/reanimated-interactions#automatic-workletization-of-gesture-callbacks",children:"Integration with Reanimated"})," section."]}),"\n",(0,o.jsx)(n.h2,{id:"callbacks-flow",children:"Callbacks flow"}),"\n",(0,o.jsx)(n.h3,{id:"gestureevent-callbacks",children:"GestureEvent callbacks"}),"\n",(0,o.jsx)(p,{}),"\n",(0,o.jsx)(n.p,{children:"Note that some of these callbacks are complementary:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["if ",(0,o.jsx)(n.code,{children:"onBegin"})," was called, it is guaranteed that ",(0,o.jsx)(n.code,{children:"onFinalize"})," will be called later."]}),"\n",(0,o.jsxs)(n.li,{children:["if ",(0,o.jsx)(n.code,{children:"onActivate"})," was called, it is guaranteed that ",(0,o.jsx)(n.code,{children:"onDeactivate"})," will be called later."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"touchevent-callbacks",children:"TouchEvent callbacks"}),"\n",(0,o.jsx)(m,{}),"\n",(0,o.jsx)(n.h2,{id:"callbacks",children:"Callbacks"}),"\n",(0,o.jsx)(n.h3,{id:"onbegin",children:"onBegin"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onBegin: (event: GestureEvent<HandlerData>) => void\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Called when a handler begins to recognize gestures. If ",(0,o.jsx)(n.code,{children:"onBegin"})," was called, it is guaranteed that ",(0,o.jsx)(n.code,{children:"onFinalize"})," will be called later."]}),"\n",(0,o.jsx)(n.h3,{id:"onactivate",children:"onActivate"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onActivate: (event: GestureEvent<HandlerData>) => void\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Called when activation criteria for handler are met. If ",(0,o.jsx)(n.code,{children:"onActivate"})," was called, it is guaranteed that ",(0,o.jsx)(n.code,{children:"onDeactivate"})," will be called later."]}),"\n",(0,o.jsx)(n.h3,{id:"onupdate",children:"onUpdate"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onUpdate: (event: GestureEvent<HandlerData>) => void\n"})}),"\n",(0,o.jsx)(n.p,{children:"Called each time a pointer tracked by the gesture changes state, typically due to movement, after the gesture has been activated."}),"\n",(0,o.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onDeactivate: (event: GestureEvent<HandlerData>, didSucceed: boolean) => void\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Called after when handler stops recognizing gestures, but only if handler activated. It is called before ",(0,o.jsx)(n.code,{children:"onFinalize"}),". If the handler was interrupted, the ",(0,o.jsx)(n.code,{children:"didSucceed"})," argument is set to ",(0,o.jsx)(n.code,{children:"false"}),". Otherwise it is set to ",(0,o.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"onfinalize",children:"onFinalize"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onFinalize: (event: GestureEvent<HandlerData>, didSucceed: boolean) => void\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Called when handler stops recognizing gestures. If handler managed to activate, the ",(0,o.jsx)(n.code,{children:"didSucceed"})," argument is set to ",(0,o.jsx)(n.code,{children:"true"})," and ",(0,o.jsx)(n.code,{children:"onFinalize"})," will be called right after ",(0,o.jsx)(n.code,{children:"onDeactivate"}),". Otherwise it is set to ",(0,o.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"ontouchesdown",children:"onTouchesDown"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onTouchesDown: (event: GestureTouchEvent) => void\n"})}),"\n",(0,o.jsx)(n.p,{children:"Called when new pointers are placed on the screen. It may carry information about more than one pointer because the events are batched."}),"\n",(0,o.jsx)(n.h3,{id:"ontouchesmove",children:"onTouchesMove"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onTouchesMove: (event: GestureTouchEvent) => void\n"})}),"\n",(0,o.jsx)(n.p,{children:"Called when pointers are moved on the screen. It may carry information about more than one pointer because the events are batched."}),"\n",(0,o.jsx)(n.h3,{id:"ontouchesup",children:"onTouchesUp"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onTouchesUp: (event: GestureTouchEvent) => void\n"})}),"\n",(0,o.jsx)(n.p,{children:"Called when pointers are lifted from the screen. It may carry information about more than one pointer because the events are batched."}),"\n",(0,o.jsx)(n.h3,{id:"ontouchescancel",children:"onTouchesCancel"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"onTouchesCancel: (event: GestureTouchEvent) => void\n"})}),"\n",(0,o.jsx)(n.p,{children:"Called when there will be no more information about this pointer. It may be called because the gesture has ended or was interrupted. It may carry information about more than one pointer because the events are batched."}),"\n",(0,o.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,o.jsx)(n.h3,{id:"gestureevent",children:"GestureEvent"}),"\n",(0,o.jsx)(f.A,{label:"Show composed types definitions",expandedLabel:"Hide composed types definitions",lineBounds:[0,4],src:"\nexport type GestureEvent<HandlerData> = {\nhandlerTag: number;\nnumberOfPointers: number;\npointerType: PointerType;\n} & HandlerData;\n\nexport enum PointerType {\nTOUCH,\nSTYLUS,\nMOUSE,\nKEY,\nOTHER,\n}\n"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GestureEvent"})," contains properties common to all gestures (",(0,o.jsx)(n.code,{children:"handlerTag"}),", ",(0,o.jsx)(n.code,{children:"numberOfPointers"}),", ",(0,o.jsx)(n.code,{children:"pointerType"}),") along with gesture-specific data defined in each gesture's documentation."]}),"\n",(0,o.jsx)(n.h3,{id:"touchevent",children:"TouchEvent"}),"\n",(0,o.jsx)(f.A,{label:"Show composed types definitions",expandedLabel:"Hide composed types definitions",lineBounds:[0,8],src:"\nexport type GestureTouchEvent = {\nhandlerTag: number;\nnumberOfTouches: number;\nstate: State;\neventType: TouchEventType;\nallTouches: TouchData[];\nchangedTouches: TouchData[];\npointerType: PointerType;\n};\n\nexport const State = {\nUNDETERMINED: 0,\nFAILED: 1,\nBEGAN: 2,\nCANCELLED: 3,\nACTIVE: 4,\nEND: 5,\n} as const;\n\nexport const TouchEventType = {\nUNDETERMINED: 0,\nTOUCHES_DOWN: 1,\nTOUCHES_MOVE: 2,\nTOUCHES_UP: 3,\nTOUCHES_CANCEL: 4,\n} as const;\n\nexport enum PointerType {\nTOUCH,\nSTYLUS,\nMOUSE,\nKEY,\nOTHER,\n}\n"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"TouchEvent"})," carries information about raw touch events, like touching the screen or moving the finger."]})]})}function _(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(T,{...e})}):T(e)}},2800:(e,n,t)=>{t.d(n,{A:()=>x});var a=t(6540),o=t(8069);const s={container:"container_oGcb",collapseButton:"collapseButton_YVdr"},r="collapseButton_X7H2",l="arrow_XdVJ";var c;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},i.apply(null,arguments)}const d=({title:e,titleId:n,...t})=>a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,c||(c=a.createElement("path",{stroke:"#001A72",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var h;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},u.apply(null,arguments)}const v=({title:e,titleId:n,...t})=>a.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,h||(h=a.createElement("path",{stroke:"#F8F9FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var p=t(8532),g=t(4164),b=t(4848);const m=({label:e,expandedLabel:n,collapsed:t,onCollapse:a,className:o})=>{const{colorMode:s}=(0,p.G)();return(0,b.jsxs)("div",{className:(0,g.A)(r,o),"data-collapsed":t,onClick:()=>a(),children:["light"===s?(0,b.jsx)(d,{className:l}):(0,b.jsx)(v,{className:l}),(0,b.jsx)("button",{type:"button",children:t?e:n})]})};var f=t(9146);function x({src:e,label:n,expandedLabel:t,lineBounds:r}){const[l,c]=(0,a.useState)(!0),i=(0,f.A)(e);if(!r)return(0,b.jsx)(o.A,{language:"tsx",children:i});const[d,h]=r,u=i.split("\n").slice(d,h+1).join("\n");return(0,b.jsxs)("div",{className:s.container,children:[(0,b.jsx)(m,{label:n,expandedLabel:t,collapsed:l,onCollapse:()=>c(!l),className:s.collapseButton}),(0,b.jsx)(o.A,{language:"tsx",children:l?u:i})]})}},9146:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(6540),o=t(8463),s=t(2396),r=t(6745);const l={parser:"typescript",plugins:[s.A,r.Ay]};function c(e){const[n,t]=(0,a.useState)(e);return(0,a.useEffect)((()=>{!async function(){try{const n=await o.GP(e,l);t(n)}catch{t(e)}}()}),[e]),n}}}]);