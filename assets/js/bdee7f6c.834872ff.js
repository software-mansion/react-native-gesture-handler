"use strict";(self.webpackChunkreact_native_gesture_handler_docs=self.webpackChunkreact_native_gesture_handler_docs||[]).push([[9817],{2542:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"fundamentals/animated-interactions","title":"Integration with Animated","description":"Using hook API allows for smooth integration with the Animated API by allowing for passing an Animated.event as the argument to the onUpdate callback. The event mapping of Animated.event depends on the useNativeDriver property.","source":"@site/docs/fundamentals/animated-interactions.mdx","sourceDirName":"fundamentals","slug":"/fundamentals/animated-interactions","permalink":"/react-native-gesture-handler/docs/fundamentals/animated-interactions","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-gesture-handler/edit/main/packages/docs-gesture-handler/docs/fundamentals/animated-interactions.mdx","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"id":"animated-interactions","title":"Integration with Animated","sidebar_label":"Integration with Animated","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Integration with Reanimated","permalink":"/react-native-gesture-handler/docs/fundamentals/reanimated-interactions"},"next":{"title":"Guides","permalink":"/react-native-gesture-handler/docs/category/guides"}}');var r=n(4848),i=n(8453),s=n(2800);const o={id:"animated-interactions",title:"Integration with Animated",sidebar_label:"Integration with Animated",sidebar_position:9},l=void 0,d={},c=[{value:"useNativeDriver",id:"usenativedriver",level:2},{value:"Usage with VirtualGestureDetector",id:"usage-with-virtualgesturedetector",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Using hook API allows for smooth integration with the ",(0,r.jsx)(t.a,{href:"https://reactnative.dev/docs/animated",children:"Animated API"})," by allowing for passing an ",(0,r.jsx)(t.code,{children:"Animated.event"})," as the argument to the ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/callbacks-events#onupdate",children:(0,r.jsx)(t.code,{children:"onUpdate"})})," callback. The event mapping of ",(0,r.jsx)(t.code,{children:"Animated.event"})," depends on the ",(0,r.jsx)(t.a,{href:"https://reactnative.dev/docs/animated#using-the-native-driver",children:(0,r.jsx)(t.code,{children:"useNativeDriver"})})," property."]}),"\n",(0,r.jsxs)(t.p,{children:["When using Animated API, remember to set ",(0,r.jsx)(t.code,{children:"useAnimated"})," property to ",(0,r.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,r.jsx)(t.admonition,{title:"Mixing Reanimated and Animated",type:"danger",children:(0,r.jsxs)(t.p,{children:["It is not possible to mix Reanimated and Animated within any of the ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/gesture-detectors",children:"gesture detectors"}),"."]})}),"\n",(0,r.jsx)(s.A,{label:"Show full example",expandedLabel:"Hide full example",lineBounds:[8,33],src:"\nimport * as React from 'react';\nimport { Animated, StyleSheet, useAnimatedValue } from 'react-native';\nimport {\nGestureHandlerRootView,\nGestureDetector,\nusePanGesture,\n} from 'react-native-gesture-handler';\n\nexport default function App() {\nconst value = useAnimatedValue(0);\n\nconst event = Animated.event(\n  [{ nativeEvent: { handlerData: { translationX: value } } }],\n  {\n    useNativeDriver: true,\n  }\n);\n\nconst gesture = usePanGesture({\n  // highlight-next-line\n  onUpdate: event,\n  // highlight-next-line\n  useAnimated: true,\n});\n\nreturn (\n  <GestureHandlerRootView>\n    <GestureDetector gesture={gesture}>\n      <Animated.View\n        style={[styles.box, { transform: [{ translateX: value }] }]}\n      />\n    </GestureDetector>\n  </GestureHandlerRootView>\n);\n}\n\nconst styles = StyleSheet.create({\nbox: {\n  width: 150,\n  height: 150,\n  backgroundColor: '#b58df1',\n},\n});\n"}),"\n",(0,r.jsx)(t.h2,{id:"usenativedriver",children:"useNativeDriver"}),"\n",(0,r.jsxs)(t.p,{children:["When using ",(0,r.jsx)(t.code,{children:"Animated.event"})," with ",(0,r.jsx)(t.code,{children:"useNativeDriver"})," set to ",(0,r.jsx)(t.code,{children:"false"}),", it is required to set ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/reanimated-interactions#disablereanimated",children:(0,r.jsx)(t.code,{children:"disableReanimated"})})," to ",(0,r.jsx)(t.code,{children:"true"})," in the gesture configuration."]}),"\n",(0,r.jsxs)(t.p,{children:["Mapping of ",(0,r.jsx)(t.code,{children:"Animated.event"})," depends on the value of ",(0,r.jsx)(t.code,{children:"useNativeDriver"})," property. When set to ",(0,r.jsx)(t.code,{children:"true"}),", event data can be accessed through ",(0,r.jsx)(t.code,{children:"nativeEvent.handlerData"})," property:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:"  const value = useAnimatedValue(0);\n\n  const event = Animated.event(\n    [{ nativeEvent: { handlerData: { /* translationX: value, ... */ } } }],\n    { useNativeDriver: true }\n  );\n"})}),"\n",(0,r.jsxs)(t.p,{children:["In case of ",(0,r.jsx)(t.code,{children:"useNativeDriver"})," set to ",(0,r.jsx)(t.code,{children:"false"}),", event data is accessed directly:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:"  const value = useAnimatedValue(0);\n\n  const event = Animated.event(\n    [ { /* translationX: value, ... */ } ],\n    { useNativeDriver: false }\n  );\n"})}),"\n",(0,r.jsx)(t.h2,{id:"usage-with-virtualgesturedetector",children:"Usage with VirtualGestureDetector"}),"\n",(0,r.jsxs)(t.p,{children:["Using ",(0,r.jsx)(t.code,{children:"Animated.event"})," with ",(0,r.jsx)(t.a,{href:"/docs/fundamentals/gesture-detectors#virtualgesturedetector",children:(0,r.jsx)(t.code,{children:"VirtualGestureDetector"})})," is possible only when ",(0,r.jsx)(t.code,{children:"useNativeDriver"})," is set to ",(0,r.jsx)(t.code,{children:"false"}),"."]}),"\n",(0,r.jsx)(s.A,{label:"Show full example",expandedLabel:"Hide full example",lineBounds:[8,33],src:"\nimport React from 'react';\nimport { View, StyleSheet, Animated, useAnimatedValue } from 'react-native';\nimport {\nGestureHandlerRootView,\nInterceptingGestureDetector,\nusePanGesture,\nVirtualGestureDetector,\n} from 'react-native-gesture-handler';\n\nexport default function App() {\nconst value = useAnimatedValue(0);\nconst event = Animated.event([{ translationX: value }], {\n  useNativeDriver: false,\n});\n\nconst panGesture = usePanGesture({\n  onUpdate: event,\n  disableReanimated: true,\n});\n\nreturn (\n  <GestureHandlerRootView style={styles.container}>\n    <InterceptingGestureDetector>\n      <View style={styles.outerBox}>\n        <VirtualGestureDetector gesture={panGesture}>\n          <Animated.View\n            style={[styles.innerBox, { transform: [{ translateX: value }] }]}\n          />\n        </VirtualGestureDetector>\n      </View>\n    </InterceptingGestureDetector>\n  </GestureHandlerRootView>\n);\n}\n\nconst styles = StyleSheet.create({\ncontainer: {\n  flex: 1,\n  alignItems: 'center',\n  justifyContent: 'center',\n},\nouterBox: {\n  backgroundColor: '#b58df1',\n  width: 150,\n  height: 150,\n},\ninnerBox: {\n  width: 100,\n  height: 100,\n  backgroundColor: 'blue',\n},\n});\n"})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},2800:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(6540),r=n(8069);const i={container:"container_oGcb",collapseButton:"collapseButton_YVdr"},s="collapseButton_X7H2",o="arrow_XdVJ";var l;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(null,arguments)}const c=({title:e,titleId:t,...n})=>a.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,l||(l=a.createElement("path",{stroke:"#001A72",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var u;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(null,arguments)}const m=({title:e,titleId:t,...n})=>a.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,u||(u=a.createElement("path",{stroke:"#F8F9FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var p=n(8532),v=n(4164),g=n(4848);const x=({label:e,expandedLabel:t,collapsed:n,onCollapse:a,className:r})=>{const{colorMode:i}=(0,p.G)();return(0,g.jsxs)("div",{className:(0,v.A)(s,r),"data-collapsed":n,onClick:()=>a(),children:["light"===i?(0,g.jsx)(c,{className:o}):(0,g.jsx)(m,{className:o}),(0,g.jsx)("button",{type:"button",children:n?e:t})]})};var f=n(9146);function j({src:e,label:t,expandedLabel:n,lineBounds:s,collapsed:o=!0}){const[l,d]=(0,a.useState)(o),c=(0,f.A)(e);if(!s)return(0,g.jsx)(r.A,{language:"tsx",children:c});const[u,h]=s,m=c.split("\n").slice(u,h+1).join("\n");return(0,g.jsxs)("div",{className:i.container,children:[(0,g.jsx)(x,{label:t,expandedLabel:n,collapsed:l,onCollapse:()=>d(!l),className:i.collapseButton}),(0,g.jsx)(r.A,{language:"tsx",children:l?m:c})]})}},9146:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(6540),r=n(8463),i=n(2396),s=n(6745);const o={parser:"typescript",plugins:[i.A,s.Ay]};function l(e){const[t,n]=(0,a.useState)(e);return(0,a.useEffect)((()=>{!async function(){try{const t=await r.GP(e,o);n(t)}catch{n(e)}}()}),[e]),t}}}]);