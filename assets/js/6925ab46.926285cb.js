"use strict";(self.webpackChunkreact_native_gesture_handler_docs=self.webpackChunkreact_native_gesture_handler_docs||[]).push([[9656],{774:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"fundamentals/state-manager","title":"State manager","description":"RNGH3 allows to manually control gestures lifecycle by using GestureStateManager.","source":"@site/docs/fundamentals/state-manager.mdx","sourceDirName":"fundamentals","slug":"/fundamentals/state-manager","permalink":"/react-native-gesture-handler/docs/fundamentals/state-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/software-mansion/react-native-gesture-handler/edit/main/docs/docs/fundamentals/state-manager.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"state-manager","title":"State manager","sidebar_label":"State manager","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Gesture composition & interactions","permalink":"/react-native-gesture-handler/docs/fundamentals/gesture-composition"},"next":{"title":"Gesture callbacks & events","permalink":"/react-native-gesture-handler/docs/fundamentals/callbacks-events"}}');var s=t(4848),r=t(8453),l=t(2800);const i={id:"state-manager",title:"State manager",sidebar_label:"State manager",sidebar_position:6},o=void 0,c={},d=[{value:"State management",id:"state-management",level:2},{value:"Inside gesture definition",id:"inside-gesture-definition",level:3},{value:"Outside gesture definition",id:"outside-gesture-definition",level:3},{value:"Methods",id:"methods",level:2},{value:"begin",id:"begin",level:3},{value:"activate",id:"activate",level:3},{value:"deactivate",id:"deactivate",level:3},{value:"fail",id:"fail",level:3}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["RNGH3 allows to manually control gestures lifecycle by using ",(0,s.jsx)(n.code,{children:"GestureStateManager"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"state-management",children:"State management"}),"\n",(0,s.jsxs)(n.p,{children:["Manual state management is based on ",(0,s.jsx)(n.code,{children:"handlerTag"}),". There are two ways of manual state control."]}),"\n",(0,s.jsx)(n.h3,{id:"inside-gesture-definition",children:"Inside gesture definition"}),"\n",(0,s.jsxs)(n.p,{children:["If you want to manipulate gesture's state in its callbacks, you can get ",(0,s.jsx)(n.code,{children:"handlerTag"})," from event parameter."]}),"\n",(0,s.jsx)(l.A,{label:"Show full example",expandedLabel:"Hide full example",lineBounds:[9,17],src:"\nimport { StyleSheet, View } from 'react-native';\nimport {\nGestureDetector,\nGestureHandlerRootView,\nGestureStateManager,\nuseLongPressGesture,\n} from 'react-native-gesture-handler';\n\nexport default function App() {\nconst longPress = useLongPressGesture({\n  onTouchesDown: (e) => {\n    // highlight-next-line\n    GestureStateManager.activate(e.handlerTag);\n  },\n  onActivate: () => {\n    console.log('LongPress activated!');\n  },\n});\n\nreturn (\n  <GestureHandlerRootView style={styles.container}>\n    <GestureDetector gesture={longPress}>\n      <View style={styles.box} />\n    </GestureDetector>\n  </GestureHandlerRootView>\n);\n}\n\nconst styles = StyleSheet.create({\ncontainer: {\n  flex: 1,\n  alignItems: 'center',\n  justifyContent: 'space-around',\n},\n\nbox: {\n  width: 150,\n  height: 150,\n  backgroundColor: 'blue',\n},\n});\n"}),"\n",(0,s.jsx)(n.h3,{id:"outside-gesture-definition",children:"Outside gesture definition"}),"\n",(0,s.jsxs)(n.p,{children:["If you want to control gesture lifecycle outside of it, you can use ",(0,s.jsx)(n.code,{children:"handlerTag"})," from created gesture object."]}),"\n",(0,s.jsx)(l.A,{label:"Show full example",expandedLabel:"Hide full example",lineBounds:[10,21],src:"\nimport { StyleSheet, View } from 'react-native';\nimport {\nGestureDetector,\nGestureHandlerRootView,\nGestureStateManager,\nuseLongPressGesture,\nusePanGesture,\n} from 'react-native-gesture-handler';\n\nexport default function App() {\nconst pan = usePanGesture({\n  onActivate: () => {\n    console.log('Pan activated!');\n  },\n});\n\nconst longPress = useLongPressGesture({\n  onActivate: () => {\n    // highlight-next-line\n    GestureStateManager.activate(pan.handlerTag);\n  },\n});\n\nreturn (\n  <GestureHandlerRootView style={styles.container}>\n    <GestureDetector gesture={longPress}>\n      <View style={styles.box} />\n    </GestureDetector>\n    <GestureDetector gesture={pan}>\n      <View style={styles.box} />\n    </GestureDetector>\n  </GestureHandlerRootView>\n);\n}\n\nconst styles = StyleSheet.create({\ncontainer: {\n  flex: 1,\n  alignItems: 'center',\n  justifyContent: 'space-around',\n},\n\nbox: {\n  width: 150,\n  height: 150,\n  backgroundColor: 'blue',\n},\n});\n"}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsx)(n.h3,{id:"begin",children:"begin"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"begin: (handlerTag: number) => void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Triggers ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#onbegin",children:(0,s.jsx)(n.code,{children:"onBegin"})})," callback on gesture with specified ",(0,s.jsx)(n.code,{children:"handlerTag"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"activate",children:"activate"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"activate: (handlerTag: number) => void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Triggers ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#onactivate",children:(0,s.jsx)(n.code,{children:"onActivate"})})," callback on gesture with specified ",(0,s.jsx)(n.code,{children:"handlerTag"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"deactivate",children:"deactivate"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"deactivate: (handlerTag: number) => void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If the gesture had activated, it triggers the ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#ondeactivate",children:(0,s.jsx)(n.code,{children:"onDeactivate"})})," callback. It also triggers the ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#onfinalize",children:(0,s.jsx)(n.code,{children:"onFinalize"})})," callback on gesture with the specified ",(0,s.jsx)(n.code,{children:"handlerTag"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"fail",children:"fail"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"fail: (handlerTag: number) => void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Triggers ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#onfinalize",children:(0,s.jsx)(n.code,{children:"onFinalize"})})," callback on gesture with specified ",(0,s.jsx)(n.code,{children:"handlerTag"}),". If gesture had activated, it will also trigger ",(0,s.jsx)(n.a,{href:"/docs/fundamentals/callbacks-events#ondeactivate",children:(0,s.jsx)(n.code,{children:"onDeactivate"})})," callback."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},2800:(e,n,t)=>{t.d(n,{A:()=>b});var a=t(6540),s=t(8069);const r={container:"container_oGcb",collapseButton:"collapseButton_YVdr"},l="collapseButton_X7H2",i="arrow_XdVJ";var o;function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},c.apply(null,arguments)}const d=({title:e,titleId:n,...t})=>a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,o||(o=a.createElement("path",{stroke:"#001A72",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var u;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},h.apply(null,arguments)}const g=({title:e,titleId:n,...t})=>a.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:12,height:7,fill:"none",viewBox:"0 0 12 7","aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,u||(u=a.createElement("path",{stroke:"#F8F9FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 1 5 5 5-5"})));var m=t(8532),f=t(4164),p=t(4848);const x=({label:e,expandedLabel:n,collapsed:t,onCollapse:a,className:s})=>{const{colorMode:r}=(0,m.G)();return(0,p.jsxs)("div",{className:(0,f.A)(l,s),"data-collapsed":t,onClick:()=>a(),children:["light"===r?(0,p.jsx)(d,{className:i}):(0,p.jsx)(g,{className:i}),(0,p.jsx)("button",{type:"button",children:t?e:n})]})};var v=t(9146);function b({src:e,label:n,expandedLabel:t,lineBounds:l}){const[i,o]=(0,a.useState)(!0),c=(0,v.A)(e);if(!l)return(0,p.jsx)(s.A,{language:"tsx",children:c});const[d,u]=l,h=c.split("\n").slice(d,u+1).join("\n");return(0,p.jsxs)("div",{className:r.container,children:[(0,p.jsx)(x,{label:n,expandedLabel:t,collapsed:i,onCollapse:()=>o(!i),className:r.collapseButton}),(0,p.jsx)(s.A,{language:"tsx",children:i?h:c})]})}},9146:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(6540),s=t(8463),r=t(2396),l=t(6745);const i={parser:"typescript",plugins:[r.A,l.Ay]};function o(e){const[n,t]=(0,a.useState)(e);return(0,a.useEffect)((()=>{!async function(){try{const n=await s.GP(e,i);t(n)}catch{t(e)}}()}),[e]),n}}}]);